<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Setup &mdash; NEDUM-2D for CoCT  documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="General framework" href="guidelines.html" />
    <link rel="prev" title="Welcome to NEDUM-2D’s documentation!" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            NEDUM-2D for CoCT
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Setup</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="#resources">Resources</a></li>
<li class="toctree-l2"><a class="reference internal" href="#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#versioning">Versioning</a></li>
<li class="toctree-l2"><a class="reference internal" href="#about-the-authors">About the authors</a></li>
<li class="toctree-l2"><a class="reference internal" href="#meta">Meta</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="guidelines.html">General framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="use_case_nb.html">Notebook: use cases</a></li>
<li class="toctree-l1"><a class="reference internal" href="main_nb.html">Notebook: run model</a></li>
<li class="toctree-l1"><a class="reference internal" href="calib_nb.html">Notebook: run calibration</a></li>
<li class="toctree-l1"><a class="reference internal" href="api_ref.html">API reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="technical_doc.html">Technical documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="appendix.html">Appendix</a></li>
<li class="toctree-l1"><a class="reference internal" href="bibliography.html">Bibliography</a></li>
<li class="toctree-l1"><a class="reference internal" href="license_rst.html">License</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">NEDUM-2D for CoCT</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Setup</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/readme_link.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <a class="reference internal image-reference" href="_images/banner_crop.png"><img alt="Sponsors' logo banner" src="_images/banner_crop.png" style="width: 100%;" /></a>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="section" id="setup">
<h1>Setup<a class="headerlink" href="#setup" title="Permalink to this heading"></a></h1>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this heading"></a></h2>
<p><strong>NEDUM-2D</strong> (Non-Equilibrium Dynamic Urban Model) is a tool for simulating land-use patterns across a city in two dimensions. The initial rationale for its development was to have a simple and tractable urban simulation model, based on core urban economic principles, able to reproduce some of the most striking stylized facts observed across cities worldwide, with the goal of studying the impacts of land-use and transport policies on environmental and welfare outcomes. One core addition of <strong>NEDUM-2D</strong> was the introduction of inertia in adaptative responses from households and developers to policy shocks, to study their consequences on transition costs. The current version developed for the <em>City of Cape Town</em> (CoCT) incorporates several transportation modes, employment centres, income groups, and housing types, to provide even more realistic prospective scenarios, while remaining tractable in terms of causal mechanisms at play. It allows to model the spatial impact of policies with a special interest for cities in developing countries, such as informal housing regulation and localized flood protection investments.</p>
</div>
<div class="section" id="resources">
<h2>Resources<a class="headerlink" href="#resources" title="Permalink to this heading"></a></h2>
<p>Documentation is freely available at <a class="reference external" href="https://cired.github.io/cape_town_NEDUM_Python/">https://cired.github.io/cape_town_NEDUM_Python/</a>.</p>
<p>The reference working paper used along the documentation is available at <a class="reference external" href="https://openknowledge.worldbank.org/entities/publication/f599340d-9916-5611-8f54-e9dda7eef282">https://openknowledge.worldbank.org/entities/publication/f599340d-9916-5611-8f54-e9dda7eef282</a>.</p>
</div>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this heading"></a></h2>
<p><strong>Step 1</strong>: Git clone <strong>NEDUM-2D</strong> repository in your computer</p>
<ul>
<li><p>Go to <a class="reference external" href="https://github.com/CIRED/cape_town_NEDUM_Python">https://github.com/CIRED/cape_town_NEDUM_Python</a> and set up the repository on your local machine (choose your preferred option clicking on the <code class="docutils literal notranslate"><span class="pre">code</span></code> button).</p></li>
<li><p>The tree structure of the repository should correspond to (comments in parentheses):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>code capetown python (name of the repo)
├── _doc_source (source code for documentation)
├── _ex (exercise notebooks for training sessions)
├── _flood_processing (notebook + data used to pre-process Deltares coastal flood maps)
├── _old (old Python scripts used for development)
├── _research (research articles referenced in the code)
├── docs (html output for documentation)
├── calibration (package used for calibration)
├── equilibrium (package used to compute equilibrium outcomes)
├── inputs (package used to import and process inputs)
├── outputs (package used for output plots and tables)
├── .gitignore (defines files to ignore when pushing commits online)
├── LICENSE (open source license file)
├── nedum.yml (packages for conda)
├── README.rst (introduction file)
├── requirements.txt (packages for pip)
├── 0_calib_nb.ipynb (Jupyter notebook that runs calibration)
├── 1_main_nb.ipynb (Jupyter notebook that runs the model)
├── 2_plots_equil.py (exports basic plots and tables for initial state static equilibrium)
├── 2_plots_inputs.py (exports basic plots and tables for input data)
├── 2_plots_simul.py (exports basic plots and tables for subsequent dynamic simulations)
├── 3_plots_use_case_cchange.py (exports interactive plots and tables for climate change use case)
├── 3_plots_use_case_anticip.py (exports interactive plots and tables for anticipation use case)
├── 4_use_case_nb_empty.ipynb (Jupyter notebook that loads and comments on use case outputs)
└── 4_use_case_nb_full.ipynb (Jupyter notebook that loads and comments on use case outputs)
</pre></div>
</div>
</li>
</ul>
<p><strong>Step 2</strong>: Set up project directory</p>
<ul>
<li><p>To run properly, the <strong>NEDUM-2D</strong> repository (here, <code class="docutils literal notranslate"><span class="pre">code</span> <span class="pre">capetown</span> <span class="pre">python</span></code>) should be included in a project folder that also contains input data (and an empty output folder), according to the following tree structure (comments in parentheses):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>.
├── Data
│   ├── Aux data (auxiliary data used to reference raw inputs in the code)
│   ├── data_Cape_Town (input data provided by the CoCT)
│   ├── flood_maps (pre-processed flood maps)
│   ├── occupation_maps (maps for informal settlement expansion scenarios)
│   ├── precalculated_inputs (calibrated parameters and data)
│   ├── precalculated_transport (intermediate outputs of commuting choice model)
│   ├── housing_types_sal_analysis.xlsx (Small-Area-Level data on housing types)
│   └── housing_types_grid_sal.xlsx (SAL data transposed to CoCT&#39;s grid level)
├── Output
└── code capetown python
</pre></div>
</div>
</li>
</ul>
<p>Note that we do not host the data on GitHub, but that it is available upon request.</p>
<p><strong>Step 3</strong>: Set up Python environment</p>
<ul class="simple">
<li><p>If you are not familiar with Python, we recommend using the <a class="reference external" href="https://www.anaconda.com/download/">Anaconda</a> distribution and setting up a dedicated <a class="reference external" href="https://conda.io/projects/conda/en/latest/user-guide/tasks/manage-environments.html">virtual environment</a> for <strong>NEDUM-2D</strong>.</p></li>
<li><p>Open your terminal (Anaconda prompt) and go where you located the <code class="docutils literal notranslate"><span class="pre">code</span> <span class="pre">capetown</span> <span class="pre">python</span></code> folder (by pasting its local path after the command <code class="docutils literal notranslate"><span class="pre">cd</span></code> in Anaconda prompt, then press enter)</p></li>
<li><p>Make sure that all the packages indicated in the <code class="docutils literal notranslate"><span class="pre">requirements.txt</span></code> file are installed. Alternatively, if you are using Anaconda, you can directly create the adequate environment by typing <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">env</span> <span class="pre">create</span> <span class="pre">-f</span> <span class="pre">nedum.yml</span></code> from your base environment in the Anaconda terminal (this may take some time to run).</p></li>
</ul>
<p><strong>Step 4</strong>: Launch <strong>NEDUM-2D</strong></p>
<ul class="simple">
<li><p>If you are using Anaconda, activate the adequate environment by typing <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">activate</span> <span class="pre">nedum</span></code> in the Anaconda terminal. Open the integrated development environment (IDE) of your choice by typing its name in the terminal: we recommend using <code class="docutils literal notranslate"><span class="pre">jupyter-notebook</span></code> for <code class="docutils literal notranslate"><span class="pre">.ipynb</span></code> scripts and <code class="docutils literal notranslate"><span class="pre">spyder</span></code> for <code class="docutils literal notranslate"><span class="pre">.py</span></code> scripts, as they are the two IDEs set up with the <code class="docutils literal notranslate"><span class="pre">nedum</span></code> environment.</p></li>
<li><p>Note that a set of options is left for the user to change in the preamble of most scripts. Each combination corresponds to a specific simulation run, that is saved according to a given naming convention. Before running the scripts, please make sure that the options correspond to the simulation run you are interested in.</p></li>
<li><p>If needed, run the <code class="docutils literal notranslate"><span class="pre">0_calib_nb</span></code> notebook to calibrate parameters again (under <code class="docutils literal notranslate"><span class="pre">precalculated_inputs</span></code>) if underlying data (in <code class="docutils literal notranslate"><span class="pre">data_Cape_Town</span></code>) has changed. A static copy is shown in the documentation for illustrative purposes.</p></li>
<li><p>Execute the <code class="docutils literal notranslate"><span class="pre">1_main_nb</span></code> notebook to run the simulations and obtain a preview of results. Outcomes will be automatically saved in a dedicated subfolder (according to the naming convention defined in the preamble of the script) under the <code class="docutils literal notranslate"><span class="pre">Output</span></code> directory. A static copy is shown in the documentation for illustrative purposes.</p></li>
<li><p>Run the <code class="docutils literal notranslate"><span class="pre">2_plots</span></code> scripts to export static tables and figures in dedicated subfolders. <code class="docutils literal notranslate"><span class="pre">2_plots_inputs.py</span></code> plots input data that does not change across scenarios (output is saved in dedicated subfolders under the <code class="docutils literal notranslate"><span class="pre">Output</span></code> directory). <code class="docutils literal notranslate"><span class="pre">2_plots_equil.py</span></code> plots outcomes for the initial state static equilibrium. Output changes across scenarios and is saved under the specific subfolder created at previous step with <code class="docutils literal notranslate"><span class="pre">1_main_nb</span></code>. <code class="docutils literal notranslate"><span class="pre">2_plots_simul.py</span></code> plots outcomes for dynamic simulations over subsequent periods. Output is saved in same directory as for <code class="docutils literal notranslate"><span class="pre">2_plots_equil.py</span></code>: we have created a separate script in case the end user is not interested in the dynamics (which are long to loop over). In case of discrepancies, we recommend using <code class="docutils literal notranslate"><span class="pre">2_plots_equil.py</span></code> for each period individually.</p></li>
<li><p>Run the <code class="docutils literal notranslate"><span class="pre">3_plots_use_case_anticip.py</span></code> and <code class="docutils literal notranslate"><span class="pre">3_plots_use_case_cchange.py</span></code> to export (in a specific subfolder) the interactive plots and tables associated with respectively the anticipation and climate change use cases that we developed for this version of the model. This requires to run both <code class="docutils literal notranslate"><span class="pre">1_main_nb</span></code> and <code class="docutils literal notranslate"><span class="pre">2_plots_equil.py</span></code> for the scenarios used in each script (with and without anticipation, with and without climate change). The options that define which scenario to run can be modified in the preamble of the scripts (see <a class="reference internal" href="technical_doc.html"><span class="doc">Technical documentation</span></a> for more details).</p></li>
<li><p>Run the <code class="docutils literal notranslate"><span class="pre">4_use_case_nb_empty.ipynb</span></code> notebook to recover key interactive plots from <code class="docutils literal notranslate"><span class="pre">3_plots_use_case_anticip.py</span></code> and <code class="docutils literal notranslate"><span class="pre">3_plots_use_case_cchange.py</span></code> with associated comments and interpretation. As the interactive plots are too heavy to save and load as a <code class="docutils literal notranslate"><span class="pre">.html</span></code> page, we saved the notebook without the associated cached output. <code class="docutils literal notranslate"><span class="pre">4_use_case_nb_full.ipynb</span></code> provides a static version with cached output (without the possibility to zoom in and out or display information by hovering over the plots), that is shown in the documentation for illustrative purposes.</p></li>
<li><p>See <a class="reference internal" href="technical_doc.html"><span class="doc">Technical documentation</span></a> for more details on running custom simulations.</p></li>
</ul>
</div>
<div class="section" id="versioning">
<h2>Versioning<a class="headerlink" href="#versioning" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">gh_pages</span></code> branch of the GitHub repository contains the latest update of the code and is set as default. If you want to modify the code, please fork the repository and start from this branch, as this is the one used in this documentation.</p></li>
<li><p>All other branches are deprecated.</p></li>
</ul>
</div>
<div class="section" id="about-the-authors">
<h2>About the authors<a class="headerlink" href="#about-the-authors" title="Permalink to this heading"></a></h2>
<p>The development of the <strong>NEDUM-2D</strong> model was initiated at <em>CIRED</em> in 2009. Coordinated by Vincent Viguié, it involved over the years, in alphabetic order: Paolo Avner, Stéphane Hallegattte, Charlotte Liotta, Thomas Monnier, Basile Pfeiffer, Claus Rabe, Julie Rozenberg, and Harris Selod.</p>
</div>
<div class="section" id="meta">
<span id="meta-link"></span><h2>Meta<a class="headerlink" href="#meta" title="Permalink to this heading"></a></h2>
<p>If you find <strong>NEDUM-2D</strong> useful, please kindly cite our paper:</p>
<div class="highlight-latex notranslate"><div class="highlight"><pre><span></span>@techreport<span class="nb">{</span>
  author      = <span class="nb">{</span>Pfeiffer, Basile and Rabe, Claus and Selod, Harris and Viguié, Vincent<span class="nb">}</span>,
  title       = <span class="nb">{</span>Assessing Urban Policies Using a Simulation Model with Formal and Informal Housing:
  Application to Cape Town, South Africa<span class="nb">}</span>,
  year        = <span class="nb">{</span>2019<span class="nb">}</span>,
  institution = <span class="nb">{</span>World Bank<span class="nb">}</span>,
  address     = <span class="nb">{</span>Washington, DC<span class="nb">}</span>,
  series      = <span class="nb">{</span>Policy Research Working Paper<span class="nb">}</span>,
  type        = <span class="nb">{</span>Working Paper<span class="nb">}</span>,
  number      = <span class="nb">{</span>8921<span class="nb">}</span>,
  url         = <span class="nb">{</span>https://openknowledge.worldbank.org/handle/10986/31987<span class="nb">}</span>
<span class="nb">}</span>
</pre></div>
</div>
<p>For internal reference within the CoCT, please contact <a class="reference external" href="mailto:kristoff&#46;potgieter&#37;&#52;&#48;capetown&#46;gov&#46;za">kristoff<span>&#46;</span>potgieter<span>&#64;</span>capetown<span>&#46;</span>gov<span>&#46;</span>za</a>.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>User guide conception: Thomas Monnier - <a class="reference external" href="https://tlmonnier.github.io">Website</a> - <a class="reference external" href="https://twitter.com/TLMonnier">Twitter</a> - <a class="reference external" href="https://github.com/TLMonnier">Github</a> - <a class="reference external" href="mailto:thomas&#46;monnier&#37;&#52;&#48;ensae&#46;fr">thomas<span>&#46;</span>monnier<span>&#64;</span>ensae<span>&#46;</span>fr</a></p>
<p>Distributed under the GNU GENERAL PUBLIC LICENSE.</p>
<p><a class="reference external" href="https://github.com/CIRED/cape_town_NEDUM_Python">https://github.com/CIRED/cape_town_NEDUM_Python</a></p>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Welcome to NEDUM-2D’s documentation!" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="guidelines.html" class="btn btn-neutral float-right" title="General framework" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, The World Bank.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>